package application

import "fmt"

type Runner interface {
	RunApplication()
	RegisterRouter(x func(string) interface{})
}

type Usecases interface {
	RegisterUsecase() map[string]interface{}
}

func Run(rv Runner, uc Usecases) {
	if rv != nil {
		rv.RegisterRouter(func(usecaseName string) interface{} {
			usecaseMap := uc.RegisterUsecase()
			usecase, exist := usecaseMap[usecaseName]
			if !exist {
				panic(fmt.Sprint("Usecase Name %s is not registered", usecaseName))
			}
			return usecase
		})
		
		rv.RunApplication()
	}
}
